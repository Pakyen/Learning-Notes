# 七、进程控制

![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2011.18.27.png)

## 1. 什么是进程控制
**进程控制就是实现进程状态的转换，比如”创建态 —> 就绪态”、“就绪态 —> 运行态”**


## 2.如何实现进程控制？
![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2011.58.40.png)

用**原语**实现进程控制。原语的**特点**是执行期间**不允许中断**，只能一气呵成（原语也是一种程序，这种不可被中断的操作即是原子操作）

原语采用”**关中断**”指令和”**开中断**”指令实现

显然，”关/开中断”指令的权限非常大，必然是CPU在核心态下才能执行的特权指令。 (假如应用程序能使用”关/开中断”指令，那意味着它可以一直占用CPU，显然这是不被允许的）

![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2012.26.38.png)


## 3. 进程控制相关的原语
学习技巧：进程控制会导致进程状态的转换。无论哪个原语，要做的无非三类事情：

1. **更新PCB中的信息** (如 修改进程状态标识、将运行环境保存到PCB、从PCB恢复运行环境)
	1. 所有的进程控制原语一定会修改进程状态标志
	2. 剥夺当前运行进程的CPU使用权必然需要保存其运行环境 (玩游戏的存档)
	3. 某进程开始运行钱必然要恢复运行环境 (玩游戏的读档)
2. **将PCB插入合适的队列**
3. **分配/回收资源**

![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2012.39.26.png)
 ![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2012.40.15.png)

![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2012.41.57.png)

![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2012.42.33.png)

## 小结
![](%E4%B8%83%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%88%AA%E5%B1%8F2021-03-26%2012.43.00.png)






