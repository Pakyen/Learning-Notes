# 十九、生产者 - 消费者问题

经典的进程同步、互斥问题：生产者-消费者问题

## 问题描述
* 系统中有**一组生产者进程**和**一组消费者进程**
	* 生产者进程每次生产一份产品（数据）放入缓冲区
	* 消费者进程每次从缓冲区中取出一份产品（数据）并使用。

![](%E5%8D%81%E4%B9%9D%E3%80%81%E7%94%9F%E4%BA%A7%E8%80%85%20-%20%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/90A5D536-1743-406D-A542-51EDB8F6D918.png)
	* 只有**缓冲区没满**时，生产者才能把数据放入缓冲区，否则必须等待
	* 只有**缓冲区不为空**时，消费者才能从中取出产品，否则必须等待
	* 缓冲区是临界资源，各进程必须**互斥地访问**

**实现互斥的P操作一定要在实现同步的P操作之后。**
V操作不会导致进程阻塞，因此**两个V操作顺序可以交换**
![](%E5%8D%81%E4%B9%9D%E3%80%81%E7%94%9F%E4%BA%A7%E8%80%85%20-%20%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98/E77A519B-D131-4034-A785-570DE6434124.png)