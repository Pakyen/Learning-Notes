# 二、操作系统的运行机制和体系结构
![](%E4%BA%8C%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%92%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/%E6%88%AA%E5%B1%8F2021-03-24%2011.56.12.png)

## 1 运行机制
### 1.1 两种运行指令
	1. 特权指令：危险的指令，有一定权限
	2. 非特权指令：安全的指令，程序可以随便用

问：CPU怎么判断当前是否可以执行特权指令呢？
	这就引出了CPU的两种状态，用户态，还有核心态。

### 1.2 两种处理器状态
	1. 核心态
		而当CPU处于核心态时，CPU能执行非特权指令和特权指令。
	2. 用户态
		当CPU处于用户态时，CPU只能执行非特权指令,

问：那CPU怎么知道自己位于哪个状态呢？
	其实CPU中有一个寄存器 — **程序状态字寄存器(PSW)**，当该寄存器的值是0时，表示CPU处于用户态；而当为1时，表示CPU处于核心态。

### 1.3 两种程序
	1. 内核程序
		内核程序是操作系统的管理者，运行于核心态，所以可以执行特权指令和非特权指令
	2. 应用程序
		应用程序运行于用户态，只能执行非特权指令

 
## 2 操作系统内核
操作系统的内核分为两种，一种是大内核，一种是微内核
![](%E4%BA%8C%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%92%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/5FD70CB5-029B-4EBE-84B9-C70C8DBC7346.png)
 原语是一种特殊的程序，是最接近硬件的部分，这种程序的运行具有原子性
  
![](%E4%BA%8C%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%92%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/%E6%88%AA%E5%B1%8F2021-03-24%2012.15.59.png)


## 3 操作系统的体系结构
![](%E4%BA%8C%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%92%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/%E6%88%AA%E5%B1%8F2021-03-24%2012.17.10.png)





