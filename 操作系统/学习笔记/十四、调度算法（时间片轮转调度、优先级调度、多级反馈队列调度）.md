# 十四、调度算法（时间片轮转调度、优先级调度、多级反馈队列调度）

![](%E5%8D%81%E5%9B%9B%E3%80%81%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%EF%BC%88%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%E8%B0%83%E5%BA%A6%E3%80%81%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6%E3%80%81%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97%E8%B0%83%E5%BA%A6%EF%BC%89/%E6%88%AA%E5%B1%8F2021-04-02%2018.09.18.png)

## 1. 时间片轮转调度算法（RR，Round-Robin）

* 算法规则

按照各个进程到达就绪队列的顺序，轮流让各个进程执行一个时间片
若进程未在一个时间片内执行完，将进程重新放到就绪队列队尾重新排队
 
* 用于作业or进程调度？
**用于进程调度**（因为只有作业被放入内存，建立了相应的进程后，才能被分配处理机时间片）

* **抢占式**
	若进程没在时间片内运行完，就会被剥夺cpu使用权，因此RR是**抢占式**的算法
	由时钟装置发出**时钟中断**来通知cpu时间片已到

* 优点
	* 公平，响应快，适用于分时操作系统

* 缺点
	* 由于高频率的进程切换，因此有一定的开销；
	* 不区分任务的紧急程度

* 是否会导致饥饿问题？不会


## 2. 优先级调度算法

* 算法规则
	为每个作业or进程设置不同的优先级，**调度**时选择优先级最高的作业or进程

* 用于作业or进程调度？
	既可用于作业调度，也可用于进程调度。甚至，还会用于I/O调度中
	用于作业调度时，选择一个处于外存后备队列中的作业进入内存
	用于进程调度时，选择一个处于内存就绪队列中的进程，为它分配cpu

* 抢占式or非抢占式？
有抢占式的版本，也有非抢占式的版本
	* **非抢占式**
		* 只需要在进程主动放弃cpu时进行调度即可
	* **抢占式**
		* 除了需要在进程放弃cpu时进行调度，也需要在就绪队列变化时，检查是否会发生抢占

* 优点
	用优先级区别紧急程度、重要程度，适用于实时操作修通。可灵活地调整对各种作业/进程的偏好程度

* 缺点
	若源源不断地有高优先级进程到来，则可能导致饥饿

* 是否会导致饥饿？会



![](%E5%8D%81%E5%9B%9B%E3%80%81%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%EF%BC%88%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%E8%B0%83%E5%BA%A6%E3%80%81%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6%E3%80%81%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97%E8%B0%83%E5%BA%A6%EF%BC%89/%E6%88%AA%E5%B1%8F2021-04-02%2019.35.25.png)

## 3. 多级反馈队列调度算法
[2019 王道考研 操作系统_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili](https://www.bilibili.com/video/BV1YE411D7nH?p=17)
	* 算法思想
		* 对其他调度算法的折中权衡

	* **算法规则**
		1. 设置**多级就绪队列**，**各级队列优先级从高到低**，**时间片从小到大**
		2. 新进程到达时先进入第1级队列，按FCFS原则排队等待被分配时间片，若用完时间片进程还未结束，则进程进入下一级队列队尾。如果此时已经是在最下级的队列，则重新放回该队列队尾
		3. 只有第k级队列为空时，才会为k+1级队头的进程分配时间片


	* 用于作业or进程调度？
		* **用于进程调度**

	* 是否可抢占？
		有**非抢占式**的版本，也有**抢占式**的版本。**一般是抢占式的**。
		* 抢占式的：在k级队列的进程运行过程中，若更上级的队列(1~k-1级)中进入了一个新进程，则由于新进程处于优先级更高的队列中，因此新进程会抢占处理机，*原来运行的进程放回k级队列队尾*，注意这里不是放到下一级队列。

	* 优点
		* 对各类型进程相对公平(FCFS的优点) ;
		* 每个新到达的进程都可以很快就得到响应(RR的优点) ;
		* 短进程只用较少的时间就可完成(SPF的优点) :
		* 不必实现估计进程的运行时间(避免用户作假) ;
		* 可灵活地调整对各类进程的偏好程度，比如CPU密集型进程、I/O密集型进程(拓展:可以将因I/O而阻塞的进程重新放回原队列，这样I/O型进程就可以保持较高优先级)


	* 缺点
	可能会导致饥饿

	* 是否会导致饥饿？会



![](%E5%8D%81%E5%9B%9B%E3%80%81%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%EF%BC%88%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%E8%B0%83%E5%BA%A6%E3%80%81%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6%E3%80%81%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97%E8%B0%83%E5%BA%A6%EF%BC%89/F5D1B094-F8D0-41EB-BBA1-A194DB665062.png)


## 三个调度算法对比
![](%E5%8D%81%E5%9B%9B%E3%80%81%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%EF%BC%88%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%E8%B0%83%E5%BA%A6%E3%80%81%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6%E3%80%81%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97%E8%B0%83%E5%BA%A6%EF%BC%89/9E51B33D-77CB-4184-9C5A-0AFA42B87C25.png)