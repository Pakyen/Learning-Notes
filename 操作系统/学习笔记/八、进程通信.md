# 八、进程通信

![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/%E6%88%AA%E5%B1%8F2021-03-26%2012.43.35.png)


## 1. 什么是进程通信？
进程通信：即进程之间的信息交换
![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/%E6%88%AA%E5%B1%8F2021-03-26%2012.45.20.png)


## 进程通信的方式

### 1. 共享存储

因为一个进程不能访问其他进程的地址空间，所以进程通信采用共享存储方式时，操作系统会在内存中开辟一块共享空间，允许通信进程对其**互斥**的访问

![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/%E6%88%AA%E5%B1%8F2021-03-26%2012.49.36.png)

**注意：两个进程对共享空间的访问必须是互斥的，即 同一时间只允许一个进程访问该共享空间。(互斥访问可以通过操作系统提供的工具实现)**

其实，共享存储方式还分为了两种，分别是基于数据结构的共享、基于存储区的共享。

	* **基于数据结构的共享**：共享空间的数据形式有所限制，如 共享空间只能放一个长度为10的数组。这种共享方式速度慢、限制多、是一种**低级通信方式**。

	* **基于存储区的共享**：数据的形式、存放位置都由进程控制，而不是操作系统。相比之下，这种共享方式速度更快，是一种**高级通信方式**。

### 2. 管道通信

**管道**是指用于连接读写进程的一个共享文件，又名pipe文件

![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/984D3293-1EC9-428D-B5B3-5911755925A9.png)


### 3. 消息传递

当进程以消息传递的方式通信时，消息其实就是一种**格式化的消息**

进程通过操作系统提供的”发送消息/接受消息”两个原语进行数据交换

消息传递又分为：**直接通信方式**和**间接通信方式**

#### 3.1 直接通信方式

进程将要发送的消息，通过发送原语，发送到另一个进程的消息缓冲队列中
![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/58DE3D43-C306-4A21-8790-91E8FB5D4248.png)

#### 3.2 间接通信方式

发送进程会把消息发送到一个中间实体(信箱)中，而接收进程可以通过一些方法在信箱中取走属于自己的消息。因此，这种方式也被称为”信箱通信方式”

> 这种方式类似于电子邮件系统，用户A给用户B发送的邮件会暂存于服务器的信箱中，该邮件会等待用户B的取出  
![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/A79946D0-246F-4D57-9721-544B2A164548.png)


## 小结
![](%E5%85%AB%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/%E6%88%AA%E5%B1%8F2021-03-26%2013.04.18.png)


 